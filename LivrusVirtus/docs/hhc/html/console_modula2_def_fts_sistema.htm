<html>
<head>
<title>Livrus Virtus - Console - Modula-2 - Definição - FTS - Sistema</title>
</head>
<!-- Generated by ConTEXT HTML exporter -->
<body text="#000000" bgcolor="#FFFFFF">
<pre>
<code><font  face="Courier New"><font color="#0000FF">DEFINITION MODULE </font>Sistema<font color="#808080">;

</font><font color="#0000FF">FROM </font>Rotinas <font color="#0000FF">IMPORT </font>String<font color="#808080">;
</font><font color="#0000FF">FROM </font>FileSystem <font color="#0000FF">IMPORT </font>File<font color="#808080">;
</font><font color="#0000FF">FROM </font>Arquivos <font color="#0000FF">IMPORT </font>ctArqs<font color="#808080">, </font>ctAcao<font color="#808080">, </font>ctTipo<font color="#808080">;

</font><font color="#0000FF">CONST
  </font>QTD_MAX_LINHA <font color="#808080">= </font><font color="#FF0000">18</font><font color="#808080">;

  </font>MSG_ERRO <font color="#808080">= </font><font color="#800000">'Erro: op&ccedil;&atilde;o inv&aacute;lida digite de novo'</font><font color="#808080">;
  </font>MSG_OPCAO <font color="#808080">= </font><font color="#800000">'Escolha uma op&ccedil;&atilde;o: '</font><font color="#808080">;

  </font>MSG_REGINC <font color="#808080">= </font><font color="#800000">'registro incluido!'</font><font color="#808080">;
  </font>MSG_REGNINC <font color="#808080">= </font><font color="#800000">'registro n&atilde;o incluido!'</font><font color="#808080">;
  </font>MSG_REGALT <font color="#808080">= </font><font color="#800000">'registro alterado!'</font><font color="#808080">;
  </font>MSG_REGNALT <font color="#808080">= </font><font color="#800000">'registro n&atilde;o alterado!'</font><font color="#808080">;
  </font>MSG_REGEXC <font color="#808080">= </font><font color="#800000">'registro excluido!'</font><font color="#808080">;
  </font>MSG_REGNEXC <font color="#808080">= </font><font color="#800000">'registro n&atilde;o excluido!'</font><font color="#808080">;

</font><font color="#0000FF">VAR
 </font>g_nPosChave<font color="#808080">, </font>g_nTamChave<font color="#808080">: </font><font color="#0000FF">INTEGER</font><font color="#808080">;
 </font>g_nPreco<font color="#808080">: </font><font color="#0000FF">REAL</font><font color="#808080">;

(*--- </font>Rotinas de implementa<font color="#808080">&ccedil;&atilde;</font>o do sistema <font color="#808080">-----------------------------------*)
</font><font color="#0000FF">PROCEDURE </font>rotulo<font color="#808080">(</font>sreg<font color="#808080">: </font>ctArqs<font color="#808080">; </font>nNum<font color="#808080">: </font><font color="#0000FF">CARDINAL</font><font color="#808080">): </font>String<font color="#808080">;
</font><font color="#0000FF">PROCEDURE </font>menu<font color="#808080">(</font>num<font color="#808080">: </font><font color="#0000FF">CARDINAL</font><font color="#808080">);
</font><font color="#0000FF">PROCEDURE </font>ContinuaSN<font color="#808080">(</font>nlinha<font color="#808080">, </font>nQtdLinha<font color="#808080">: </font><font color="#0000FF">CARDINAL</font><font color="#808080">): </font><font color="#0000FF">BOOLEAN</font><font color="#808080">;
</font><font color="#0000FF">PROCEDURE </font>ListarTodos<font color="#808080">(</font><font color="#0000FF">VAR </font>sArq<font color="#808080">: </font>File<font color="#808080">; </font>sreg<font color="#808080">: </font>ctArqs<font color="#808080">; </font>sChave<font color="#808080">: </font>String<font color="#808080">;
          </font>nPosChave<font color="#808080">, </font>nTamChave<font color="#808080">, </font>nTamLinha<font color="#808080">, </font>nQtdLinha<font color="#808080">: </font><font color="#0000FF">CARDINAL</font><font color="#808080">;
          </font>bPesqRelativa<font color="#808080">: </font><font color="#0000FF">BOOLEAN</font><font color="#808080">): </font><font color="#0000FF">BOOLEAN</font><font color="#808080">;
</font><font color="#0000FF">PROCEDURE </font>ListarRegLigados<font color="#808080">(</font><font color="#0000FF">VAR </font>sArq1<font color="#808080">: </font>File<font color="#808080">; </font>sreg1<font color="#808080">: </font>ctArqs<font color="#808080">; </font>nPosChave1<font color="#808080">,
          </font>nTamChave1<font color="#808080">, </font>nPosChave2<font color="#808080">, </font>nTamChave2<font color="#808080">: </font><font color="#0000FF">CARDINAL</font><font color="#808080">; </font>sChave<font color="#808080">: </font>String<font color="#808080">;
     </font><font color="#0000FF">VAR </font>sArq2<font color="#808080">: </font>File<font color="#808080">; </font>sreg2<font color="#808080">: </font>ctArqs<font color="#808080">; </font>nPosChave3<font color="#808080">, </font>nQtdLinha<font color="#808080">: </font><font color="#0000FF">CARDINAL</font><font color="#808080">);
</font><font color="#0000FF">PROCEDURE </font>validaEntrada<font color="#808080">(</font><font color="#0000FF">VAR </font>sArq<font color="#808080">: </font>File<font color="#808080">; </font>sreg<font color="#808080">: </font>ctArqs<font color="#808080">; </font>nTexto<font color="#808080">: </font><font color="#0000FF">CARDINAL</font><font color="#808080">;
        </font>sEntrada<font color="#808080">: </font>String<font color="#808080">; </font>nTentativas<font color="#808080">: </font><font color="#0000FF">CARDINAL</font><font color="#808080">;
        </font>bPesqRelativa<font color="#808080">: </font><font color="#0000FF">BOOLEAN</font><font color="#808080">; </font>bTipoEntrada<font color="#808080">: </font>ctTipo<font color="#808080">): </font>String<font color="#808080">;
</font><font color="#0000FF">PROCEDURE </font>mostrarDados<font color="#808080">(</font>sreg<font color="#808080">: </font>ctArqs<font color="#808080">; </font>slinha<font color="#808080">: </font>String<font color="#808080">; </font>nOpcao<font color="#808080">: </font><font color="#0000FF">INTEGER</font><font color="#808080">);
</font><font color="#0000FF">PROCEDURE </font>mostrarDados2<font color="#808080">(</font>sreg<font color="#808080">: </font>ctArqs<font color="#808080">; </font>slinha<font color="#808080">: </font>String<font color="#808080">; </font>nOpcao<font color="#808080">: </font><font color="#0000FF">INTEGER</font><font color="#808080">);
</font><font color="#0000FF">PROCEDURE </font>mostrarSubDados<font color="#808080">(</font>sreg<font color="#808080">, </font>ssubreg<font color="#808080">: </font>ctArqs<font color="#808080">; </font>bSoMostrar<font color="#808080">: </font><font color="#0000FF">BOOLEAN</font><font color="#808080">);
</font><font color="#0000FF">PROCEDURE </font>btnAcao<font color="#808080">(</font>sreg<font color="#808080">: </font>ctArqs<font color="#808080">; </font>sacao<font color="#808080">: </font>ctAcao<font color="#808080">);
</font><font color="#0000FF">PROCEDURE </font>ExcluirRegLigados<font color="#808080">(</font><font color="#0000FF">VAR </font>sArq<font color="#808080">: </font>File<font color="#808080">; </font>sreg<font color="#808080">: </font>ctArqs<font color="#808080">; </font>nPosChave<font color="#808080">,
          </font>nTamChave<font color="#808080">: </font><font color="#0000FF">INTEGER</font><font color="#808080">; </font>sChave<font color="#808080">: </font>String<font color="#808080">);

</font><font color="#0000FF">END </font>Sistema.
</font>
</code></pre>
</body>
</html>